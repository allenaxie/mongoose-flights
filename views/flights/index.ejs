<%- include('../partials/header') %>

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" href="/stylesheets/main.css">
        <link rel="stylesheet" href="/stylesheets/flights/index.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <title>All Flights</title>
    </head>

    <body>
        <h1 class="flight-index-heading">Flight List</h1>
        <table class="table table-striped">
            <thead class="table table-success">
                <tr>
                    <th>Airline</th>
                    <th>Airport</th>
                    <th>Flight No.</th>
                    <th>Departs</th>
                </tr>
            </thead>
            <tbody>
                <!-- Sort array by arrival -->
                <% flights.sort(function(a,b) { %>
                    <% return (a.departs - b.departs) %>
                        <% }) %>
                            <!-- Write the line of EJS to iterate over movies using forEach -->
                            <% flights.forEach(function(f) { %>
                                <tr>
                                    <td>
                                        <%= f.airline %>
                                    </td>
                                    <td>
                                        <%= f.airport%>
                                    </td>
                                    <td>
                                        <%= f.flightNo %>
                                    </td>
                                    <td>
                                        <%= f.departs %>
                                    </td>
                                    <td>
                                        <a href="/flights/<%=f._id%>">Details</a>
                                    </td>
                                </tr>
                                <!-- Close the forEach using EJS here -->
                                <% }) %>
            </tbody>
        </table>
    </body>

    </html>